I"ò<h1 id="bizarre-late-night-thoughts">Bizarre Late Night Thoughts</h1>
<p>January 7th, 2020
<em>NOTE: This post is a stream of consciousness</em></p>

<p><br />
For the majority of my life I think Iâ€™ve been stuck in two states: reflective or anxious. I realize that I have a tendency to not live in the moment at all. I like discussing things in retrospect or talking about what I will do, but I never actually <em>do</em> things in the moment. So what the hell am I doing? Is my life a movie that Iâ€™ll just nostalgically shed tears to when Iâ€™m a 49 year old nearly-retired computer engineer with chronic carpal tunnel? Sounds like a bad plan to me. Iâ€™ve been trying to take initiative to focus on what Iâ€™m doing in the present. Everything sounds easy until you realize that knocking out old habits is akin to breaking cob webs with a garden hose: you think itâ€™s going to work but only after seeing failure do you realize that you should have listened to your parents in the first place and taken good care of your things/self (yikes!)</p>

<hr style="height:10px; visibility:hidden;" />

<p>Jokes aside, Iâ€™ve been having some really interesting day dreams these days. Sometimes I think about launching a rocket up into space and trying to live in it for a while (Elon Musk would be proud of my ambitions) and other days Iâ€™m really just wondering when the next Attack on Titan chapter is going to be released. I try my best to not get too emotionally committed, but I end up pouring in the majority of my brain power to determining how the plot is going to go (donâ€™t worry, there are no spoilers here.)</p>

<hr style="height:10px; visibility:hidden;" />

<p>Rishabh and I have been trying to figure out how to stream new ODs to our implementation of algorithm-B. Currently, there are two really annoying things that are blocking our progress:</p>
<ul>
  <li>Running/debugging the codebase takes almost 15-20 minutes (sad dayz)</li>
  <li>It seems like some things are being streamed but the tight while loop is not running at all</li>
</ul>

<hr style="height:10px; visibility:hidden;" />

<p>Nothing can really be done about the first point, but the second one can be tackled to some extent. Basically what I know is that the code is sending the start signal to the binary but itâ€™s then not actually reading any of the data that is being streamed to it. I need to debug it, but I have a suspicion that there needs to be some kind of sleep invocation before the data is read through STDOUT. I think the tight loop that reads bytes from the buffer is being skipped over because there is nothing in the moment the code is run. Itâ€™s a small thing that is hard to miss but I think a simple solution (for now), would be to put a sleep call. Iâ€™m going to try that right now.</p>

<hr style="height:10px; visibility:hidden;" />

<p>Currently this is what the main loop is doing in the Java code:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">	<span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">ODMatrix</span><span class="o">&gt;</span> <span class="n">matrices</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
	<span class="nc">ProcessBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ProcessBuilder</span><span class="o">(</span><span class="s">"./tap"</span><span class="o">,</span><span class="s">"PM_NCTCOG_net.csv"</span><span class="o">,</span><span class="s">"STREAM"</span><span class="o">,</span> <span class="s">"PM_convertertable.csv"</span><span class="o">);</span>
	<span class="nc">Process</span> <span class="n">proc</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
	<span class="nc">OutputStream</span> <span class="n">stdin</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">();</span>
	<span class="n">stdin</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"Start"</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
	<span class="n">stdin</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>

	<span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
	<span class="nc">BufferedReader</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">proc</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
	<span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
	<span class="o">}</span>
	<span class="n">input</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
	<span class="n">streamODs</span><span class="o">(</span><span class="n">matrices</span><span class="o">,</span> <span class="n">stdin</span><span class="o">);</span></code></pre></figure>

<hr style="height:10px; visibility:hidden;" />

<p>Yeah so the code is still running. Basically what Iâ€™ve done is put in a sleep call right before the tight loop runs checking for things in the buffer. Side note: the Java codebase sucks up all my CPU, memory, and power. I really need a more powerful machine. Hopefully in the future I can afford a nice powerful desktop if I work with things like this.</p>

<hr style="height:10px; visibility:hidden;" />

<p>Nope the damn thing still isnâ€™t working. OK I figured it out and I realized that Iâ€™m a complete knobhead. Basically I was running a loop to output the process and it ended up being that I needed to redirect the output to a file so that I could see what was going on. Iâ€™m an IDIOT. I have been extremely absent minded in my thinking all of today. The proper remedy to this is to sleep but Iâ€™m not doing that either lol.</p>

<hr style="height:10px; visibility:hidden;" />

<p>Ok so I tried that and now the STDOUT is going to the console? Man what the hell is going on. Iâ€™ll give this a go later, for now Iâ€™m gonna take a break.</p>
:ET